<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!--    Tittle of custom portal-->
    <template id="custom_request_portal" name="Custom Request" customize_show="True" inherit_id="portal.portal_my_home"
              priority="15">
        <xpath expr="//div[hasclass('o_portal_docs')]" position="inside">
            <t t-call="portal.portal_docs_entry">
                <t t-set="title">Custom Request</t>
                <t t-set="url" t-value="'/custom/request'"/>
                <t t-set="placeholder_count" t-value="'custom_partner_len'"/>
            </t>
        </xpath>
    </template>

    <!--    add custom request in my account-->
    <template id="custom_request_portal_home" name="Portal layout : custom menu entries"
              inherit_id="portal.portal_breadcrumbs" priority="15">
        <xpath expr="//ol[hasclass('o_portal_submenu')]" position="inside">
            <li t-if="page_name == 'custom'"
                t-attf-class="breadcrumb-item #{'active ' if not custom_request_id else ''}">
                <a t-if="custom_request_id" t-attf-href="/custom/request?{{ keep_query() }}">Custom Request</a>
                <t t-else="">Custom Request</t>
            </li>
            <li t-if="custom_request" class="breadcrumb-item active">
                <a t-attf-href="/custom/request?{{ keep_query() }}">Custom Request /</a>
                <t t-esc="custom_request.partner_id.name"/>
            </li>
        </xpath>
    </template>

    <!--    Show all record of custom request -->
    <template id="custom_request_portal_sidebar_template" name="Custom Request">
        <t t-call="portal.portal_layout">
            <t t-set="breadcrumbs_searchbar" t-value="True"/>
            <t t-call="portal.portal_searchbar">
                <t t-set="title">custom Request</t>
            </t>
            <div t-if="not custom_request_id" class="alert alert-warning mt8" role="alert">
                There are currently no custom request for your account.
            </div>
            <t t-if="custom_request_id" t-call="portal.portal_table">
                <thead>
                    <tr class="active">
                        <th>Name</th>
                    </tr>
                </thead>
                <tbody>
                    <tr t-foreach="custom_request_id" t-as="custom">
                        <td>
                            <a t-attf-href="request/{{custom.id}}">
                                <t t-esc="custom.partner_id.sudo().name"/>
                            </a>
                        </td>
                    </tr>
                </tbody>
            </t>
        </t>
    </template>

    <!--    To show the record of that selected record of custom record-->
    <template id="custom_request_portal_template" name="Custom Request Portal Template"
              inherit_id="portal.portal_sidebar" primary="True">
        <xpath expr="//div[hasclass('o_portal_sidebar')]" position="inside">
            <t t-set="o_portal_fullwidth_alert">
                <t t-call="portal.portal_back_in_edit_mode">
                    <t t-set="backend_url"
                       t-value="'/web#model=%s&amp;id=%s&amp;action=%s&amp;view_type=form' % (custom_request._name, custom_request.id, custom_request.env.ref('matager_account_modifier.action_custom_request').id)"/>
                </t>
            </t>
            <div class="card ">
                <div class="custom_text pl-3 pt-3">
                    <p>
                        <span t-field="custom_request.sudo().text"/>
                    </p>
                </div>
            </div>
        </xpath>
    </template>

</odoo>